<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  
  <link rel="icon" type="image/png" href="logo-dark.png">
  
  <title>Hells Angels</title>
  
  <link rel="stylesheet" href="style.css"> 
  
</head>
<body class="light">
  
  <a href="#" id="logoLink">
    <img id="appLogo" src="logo-dark.png" alt="Hells Angels Logo" class="app-logo">
  </a>

  <div id="welcomeScreen"> 
      <img id="welcomeLogo" src="logo-dark.png" alt="Welcome Logo"> 
      <h2 style="font-weight: 900;">Bem-vindo(a)</h2>
      <p style="margin-bottom: 20px; font-size: 16px;">Calculadora e Registro de Vendas Hells Angels</p>
      <button id="enterBtn" class="primary">Entrar no Site</button>
  </div>
  
  <div class="top-right-controls">
      <button class="control-btn" id="tutorialBtn">üí° Tutorial</button> 
      <button class="control-btn" id="themeBtn">üåô Modo Noturno</button>
      
      <button class="control-btn" id="investigacaoBtn" style="background-color: #0056b3;">üîé Investiga√ß√£o</button> 
  
  </div>

  <div class="container" id="authScreen" style="display: none;">
      <div id="authContent" class="card">
          <h2>Acesso ao Sistema</h2>
          <div id="authMessage" class="message-box" style="display: none;"></div>
          
          <div id="loginForm">
              <label for="loginEmail">Nome de Usu√°rio:</label>
              <input type="text" id="loginEmail" placeholder="Ex: hells.angels">
              
              <label for="loginPassword">Senha:</label>
              <input type="password" id="loginPassword" placeholder="Sua senha">
              
              <div class="actions">
                  <button id="loginBtn" class="primary">Entrar</button>
                  <button id="registerUserBtn" class="success">Registrar Novo Usu√°rio</button>
              </div>
              <p class="link-forgot-password"><a href="#" id="forgotPasswordLink">Esqueceu a Senha?</a></p>
          </div>
          
      </div>
      
      <div id="userPanel" class="card" style="display: none;">
          <p id="userNameDisplay">Usu√°rio: **Desconhecido**</p>
          <p id="userTagDisplay">Tag: **Visitante**</p>
          <p id="userStatus" class="status-online">Online: 1 usu√°rio</p>
          <div class="actions">
              <button id="logoutBtn" class="danger">Sair</button>
              <button id="toggleHistoryBtn" class="secondary">üìã Hist√≥rico</button>
              <button id="adminPanelBtn" class="info" style="display: none;">‚öôÔ∏è Admin</button>
          </div>
      </div>
      
  </div>
  
  <div class="bottom-panel" id="bottomPanelDisplay" style="display: none;">
      </div>


  <div id="mainCard" class="card">
      <div class="grid">
          <div>
              <h2>Registro de Venda</h2>
              <div class="grid-venda">
                  <div class="input-group">
                      <label for="nomeCliente">Nome do Cliente:</label>
                      <input type="text" id="nomeCliente" placeholder="Nome do Cliente (Opcional)">
                  </div>
                  <div class="input-group">
                      <label for="organizacao">Organiza√ß√£o:</label>
                      <input type="text" id="organizacao" placeholder="Ex: Hells, Ballas, Nox">
                  </div>
                  <div class="input-group">
                      <label for="organizacaoTipo">Tipo da Org:</label>
                      <select id="organizacaoTipo">
                          <option value="limpo">Limpo (Amigo/Neutro)</option>
                          <option value="sujo">Sujo (Inimigo/Rival)</option>
                          <option value="limpo_alianca">Limpo (Alian√ßa)</option>
                          <option value="sujo_alianca">Sujo (Alian√ßa)</option>
                      </select>
                  </div>
                  <div class="input-group">
                      <label for="telefone">Telefone do Cliente:</label>
                      <input type="text" id="telefone" placeholder="Telefone (Opcional)">
                  </div>
                  <div class="input-group">
                      <label for="carroVeiculo">Carro (Opcional):</label>
                      <input type="text" id="carroVeiculo" placeholder="Modelo do Ve√≠culo">
                  </div>
                  <div class="input-group">
                      <label for="placaVeiculo">Placa (Opcional):</label>
                      <input type="text" id="placaVeiculo" placeholder="Placa do Ve√≠culo">
                  </div>
                  <div class="input-group">
                      <label for="negociadoras">Negociadoras (Hells):</label>
                      <input type="text" id="negociadoras" placeholder="Ex: Angel, Ghost, (Separar por v√≠rgula)">
                  </div>
                  <div class="input-group span-full">
                      <label for="vendaValorObs">Observa√ß√µes:</label>
                      <textarea id="vendaValorObs" placeholder="Qualquer observa√ß√£o importante sobre a venda ou cliente." rows="2"></textarea>
                  </div>
                  
              </div>
          </div>

          <div>
              <h2>Materiais Vendidos</h2>
              <div class="input-group">
                  <label for="qtyTickets">Tickets:</label>
                  <input type="number" id="qtyTickets" value="0" min="0">
              </div>
              <div class="input-group">
                  <label for="qtyTablets">Tablets:</label>
                  <input type="number" id="qtyTablets" value="0" min="0">
              </div>
              <div class="input-group">
                  <label for="qtyNitro">Nitro:</label>
                  <input type="number" id="qtyNitro" value="0" min="0">
              </div>
              
              <h2 style="margin-top: 20px;">C√°lculo e Valor Final</h2>
              <div class="input-group">
                  <label for="tipoValor">Calcular Baseado em:</label>
                  <select id="tipoValor">
                      <option value="venda">Valor de Venda (Pre√ßo de Tabela)</option>
                      <option value="custo">Custo de Produ√ß√£o (Material Gasto)</option>
                      <option value="lucro">Lucro (Venda - Custo)</option>
                  </select>
              </div>
              
              <div class="resultado-box">
                  <p>Valor Final Total:</p>
                  <p id="resultadoFinal">R$ 0</p>
                  <p class="small-info">Custo de Produ√ß√£o: <span id="resultadoCusto">R$ 0</span></p>
                  <p class="small-info">Lucro Estimado: <span id="resultadoLucro">R$ 0</span></p>
              </div>
              
              <div class="actions">
                  <button id="calcBtn" class="primary">Calcular</button>
                  <button id="resetBtn" class="secondary">Limpar</button>
                  <button id="registerBtn" class="success" style="margin-top: 10px;">Registrar Venda</button>
              </div>
          </div>
      </div>
  </div>


  <div id="historyCard" class="card history-card" style="display: none;">
      <div class="history-header">
          <button id="toggleCalcBtn" class="control-btn secondary">‚¨ÖÔ∏è Voltar para Calculadora</button>
          <input type="text" id="filtroHistorico" placeholder="Filtrar por nome/org/valor...">
          <button id="clearHistoryBtn" class="danger" style="display: none;">Limpar Hist√≥rico</button>
      </div>
      <h2>Hist√≥rico de Vendas</h2>
      <p id="historyMessage">Carregando hist√≥rico...</p>
      <div id="historyList" class="history-list">
          </div>
  </div>


  <div id="adminPanel" class="card" style="display: none;">
      <div class="admin-header">
          <button id="toggleCalcBtnAdmin" class="control-btn secondary">‚¨ÖÔ∏è Voltar para Calculadora</button>
      </div>
      <h2>‚öôÔ∏è Painel de Administra√ß√£o</h2>
      <div class="admin-section">
          <h3>Controles de Layout Global (Aplica a Todos)</h3>
          <div class="admin-controls">
              <label><input type="checkbox" id="layoutToggleNightMode"> For√ßar Modo Noturno</label>
              <label><input type="checkbox" id="layoutToggleBottomPanel"> Habilitar Painel Inferior (Aviso)</label>
              <br><br>
              <label for="bottomPanelText">Texto do Painel Inferior:</label>
              <textarea id="bottomPanelText" rows="3" placeholder="Mensagem para aparecer no painel inferior."></textarea>
              <button id="saveBottomPanelTextBtn" class="primary" style="margin-top: 10px;">Salvar Texto</button>
          </div>
      </div>
      
      <div class="admin-section">
          <h3>Usu√°rios Online</h3>
          <p class="small-info">Atividade dos usu√°rios logados.</p>
          <div id="adminContent" class="admin-user-list">
              </div>
      </div>
      
      <div class="admin-section">
          <h3>Migra√ß√£o de Dados (Apenas Admin)</h3>
          <p class="small-info">Use estas fun√ß√µes com extrema cautela.</p>
          <button id="migrateDossierBtn" class="danger">Migrar Dossi√™ de Organiza√ß√µes</button>
          <button id="migrateVeiculosBtn" class="danger">Migrar Dossi√™ de Ve√≠culos</button>
      </div>
  </div>


  <div id="dossierCard" class="card" style="display: none;">
      <div class="dossier-header">
          <button id="toggleCalcBtnDossier" class="control-btn secondary">‚¨ÖÔ∏è Voltar para Calculadora</button>
          <button id="addOrgBtn" class="success" style="margin-left: 10px;">‚ûï Add Org</button>
          <button id="addPessoaBtn" class="primary">‚ûï Add Pessoa</button>
      </div>
      
      <div class="dossier-grid">
          <div class="dossier-col">
              <h2>Organiza√ß√µes Registradas</h2>
              <div id="dossierOrgList" class="dossier-org-grid">
                  </div>
          </div>

          <div class="dossier-col">
              <h2>Pessoas e Informa√ß√µes</h2>
              <div id="dossierPeopleList" class="dossier-people-grid">
                  </div>
          </div>
      </div>
  </div>


  <div id="toast" class="toast">
      <span id="toastText">Mensagem de Teste</span>
  </div>


  <div id="addModalOverlay" class="modal-overlay"></div>
  <div id="addPessoaModal" class="card modal-content">
      <h2>Adicionar Nova Pessoa ao Dossi√™</h2>
      
      <label for="addPessoaNome">Nome Completo:</label>
      <input type="text" id="addPessoaNome" placeholder="Ex: John Doe">
      
      <label for="addPessoaOrgSelect">Organiza√ß√£o:</label>
      <select id="addPessoaOrgSelect">
          </select>
      
      <label for="addPessoaCargo">Cargo/Fun√ß√£o:</label>
      <input type="text" id="addPessoaCargo" placeholder="Ex: Membro, Lider, Vendedor">
      
      <label for="addPessoaFotoUrl">Link da Foto (URL):</label>
      <input type="text" id="addPessoaFotoUrl" placeholder="URL da foto">

      <label for="addPessoaTelefone">Telefone:</label>
      <input type="text" id="addPessoaTelefone" placeholder="Telefone (Opcional)">
      
      <div class="veiculos-section">
          <h3>Ve√≠culos Registrados</h3>
          <div id="addModalListaVeiculos" class="veiculos-list">
              </div>
          <div class="veiculo-input-group">
              <input type="text" id="addPessoaVeiculoCarro" placeholder="Modelo do Carro">
              <input type="text" id="addPessoaVeiculoPlaca" placeholder="Placa">
              <button id="addModalAddVeiculoBtn" class="secondary">Adicionar Ve√≠culo</button>
              <button id="addModalCancelVeiculoBtn" class="muted" style="display:none;">Cancelar Edi√ß√£o</button>
          </div>
      </div>
      
      <label for="addPessoaObs">Observa√ß√µes do Dossi√™:</label>
      <textarea id="addPessoaObs" placeholder="Informa√ß√µes de contato, observa√ß√µes de comportamento, etc." rows="4"></textarea>

      <div class="actions">
          <button id="addPessoaSaveBtn" class="success">Salvar Dossi√™</button>
          <button id="cancelNewDossierBtn" class="danger">Cancelar</button>
      </div>
  </div>
  
  
  <div id="editModalOverlay" class="modal-overlay"></div>
  <div id="editPessoaModal" class="card modal-content">
      <h2>Editar Pessoa no Dossi√™</h2>
      <input type="hidden" id="editPessoaId">
      
      <label for="editPessoaNome">Nome Completo:</label>
      <input type="text" id="editPessoaNome" placeholder="Ex: John Doe">
      
      <label for="editPessoaOrgSelect">Organiza√ß√£o:</label>
      <select id="editPessoaOrgSelect">
          </select>
      
      <label for="editPessoaCargo">Cargo/Fun√ß√£o:</label>
      <input type="text" id="editPessoaCargo" placeholder="Ex: Membro, Lider, Vendedor">
      
      <label for="editPessoaFotoUrl">Link da Foto (URL):</label>
      <input type="text" id="editPessoaFotoUrl" placeholder="URL da foto">

      <label for="editPessoaTelefone">Telefone:</label>
      <input type="text" id="editPessoaTelefone" placeholder="Telefone (Opcional)">
      
      <div class="veiculos-section">
          <h3>Ve√≠culos Registrados</h3>
          <div id="editModalListaVeiculos" class="veiculos-list">
              </div>
          <div class="veiculo-input-group">
              <input type="text" id="editPessoaVeiculoCarro" placeholder="Modelo do Carro">
              <input type="text" id="editPessoaVeiculoPlaca" placeholder="Placa">
              <button id="editModalAddVeiculoBtn" class="secondary">Adicionar Ve√≠culo</button>
              <button id="editModalCancelVeiculoBtn" class="muted" style="display:none;">Cancelar Edi√ß√£o</button>
          </div>
      </div>
      
      <label for="editPessoaObs">Observa√ß√µes do Dossi√™:</label>
      <textarea id="editPessoaObs" placeholder="Informa√ß√µes de contato, observa√ß√µes de comportamento, etc." rows="4"></textarea>

      <div class="actions">
          <button id="editPessoaSaveBtn" class="success">Salvar Edi√ß√£o</button>
          <button id="editPessoaDeleteBtn" class="danger">Excluir Dossi√™</button>
          <button id="cancelEditDossierBtn" class="muted">Cancelar</button>
      </div>
  </div>
  
  <div id="orgModalOverlay" class="modal-overlay"></div>
  <div id="orgModal" class="card modal-content" style="max-width: 500px;">
      <h2 id="orgModalTitle">Editar Organiza√ß√£o</h2>
      <input type="hidden" id="editOrgId">
      
      <label for="orgNome">Nome da Organiza√ß√£o:</label>
      <input type="text" id="orgNome" placeholder="Ex: Hells Angels, Nox">
      
      <label for="orgFotoUrl">Link da Logo/Foto (URL):</label>
      <input type="text" id="orgFotoUrl" placeholder="URL da imagem da organiza√ß√£o">
      
      <label for="orgInfo">Informa√ß√µes da Base:</label>
      <textarea id="orgInfo" placeholder="Detalhes sobre a base, localiza√ß√£o, etc." rows="4"></textarea>

      <div class="actions" style="margin-top: 20px; border-top: 1px solid var(--cor-borda); padding-top: 15px;">
          <button id="saveOrgBtn" class="success">Salvar</button>
          <button id="deleteOrgBtn" class="danger" style="display: none;">Excluir</button>
          <button id="cancelOrgBtn" class="muted">Cancelar</button>
      </div>
  </div>
  
  <div id="imageLightboxOverlay" class="modal-overlay"></div>
  <div id="imageLightboxModal">
      <img id="imageLightboxImg" src="" alt="Imagem em tela cheia">
  </div>
  
  <script src="./script.js" type="module"></script>
</body>
</html>
