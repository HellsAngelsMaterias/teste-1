<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  
  <link rel="icon" type="image/png" href="logo-dark.png">
  
  <title>Hells Angels</title>
  
  <link rel="stylesheet" href="style.css"> 
  
</head>
<body class="light">
  
  <a href="#" id="logoLink">
    <img id="appLogo" src="logo-dark.png" alt="Hells Angels Logo" class="app-logo">
  </a>

  <div id="welcomeScreen"> 
      <img id="welcomeLogo" src="logo-dark.png" alt="Welcome Logo"> 
      <h2 style="font-weight: 900;">Bem-vindo(a)</h2>
      <p style="margin-bottom: 20px; font-size: 16px;">Calculadora e Registro de Vendas Hells Angels</p>
      <button id="enterBtn" class="primary">Entrar no Site</button>
  </div>
  
  <div class="top-right-controls">
      <span id="userStatus" class="user-status-display" style="display: none;"></span>
      <span id="onlineIndicator" class="online-indicator" title="Online"></span>
      <button class="control-btn" id="tutorialBtn">üí° Tutorial</button> 
      <button class="control-btn" id="themeBtn">üåô Modo Noturno</button>
      <button class="control-btn" id="investigacaoBtn" style="display: none;">Investiga√ß√£o</button>
      <button class="control-btn" id="adminPanelBtn" style="display: none;">Painel Admin</button>
      <button class="control-btn" id="logoutBtn">Sair</button>
  </div>
  <div class="relogio-container" id="relogioContainer"></div>
  
  <div id="authScreen" style="display: none;">
    <div class="card" id="loginCard">
      <h2>Entrar</h2>
      <label for="username">Usu√°rio:</label>
      <input type="text" id="username" />
      <label for="password">Senha:</label>
      <input type="password" id="password" />
      <div class="actions">
        <button id="loginBtn" class="primary">Login</button>
        <button id="registerUserBtn">Registrar</button>
      </div>
       <a href="#" id="forgotPasswordLink" class="forgot-password">Esqueceu a senha?</a>
    </div>
  </div>

  <div id="mainCard" class="card" style="display: none;">
    <h2>Calculadora de Venda</h2>
    
    <div class="grid-container">
        <div class="grid-item">
            <label for="qtyTickets">Tickets (un):</label>
            <input type="number" id="qtyTickets" class="calc-input" min="0" />
        </div>
        <div class="grid-item">
            <label for="qtyTablets">Tablets (un):</label>
            <input type="number" id="qtyTablets" class="calc-input" min="0" />
        </div>
        <div class="grid-item">
            <label for="qtyNitro">Nitro (un):</label>
            <input type="number" id="qtyNitro" class="calc-input" min="0" />
        </div>
    </div>
    
    <div class="divider"></div>
    
    <div class="grid-container">
        <div class="grid-item">
            <label for="nomeCliente">Nome do Cliente:</label>
            <input type="text" id="nomeCliente" class="calc-input" />
        </div>
        <div class="grid-item grid-item-organizacao">
            <label for="organizacaoTipo">Organiza√ß√£o:</label>
            <div class="input-group">
                <select id="organizacaoTipo" class="calc-input">
                    <option value="CNPJ">CNPJ</option>
                    <option value="CPF">CPF</option>
                    <option value="OUTROS">Outros</option>
                </select>
                <input type="text" id="organizacao" class="calc-input" placeholder="Nome da Organiza√ß√£o" />
            </div>
        </div>
        <div class="grid-item">
            <label for="telefone">Telefone:</label>
            <input type="text" id="telefone" class="calc-input" placeholder="(055) 555-5555" />
        </div>
        <div class="grid-item">
            <label for="carroVeiculo">Ve√≠culo (Carro):</label>
            <input type="text" id="carroVeiculo" class="calc-input" placeholder="Ex: Sultan, Jester (separar por v√≠rgula)" />
        </div>
        <div class="grid-item">
            <label for="placaVeiculo">Placas:</label>
            <input type="text" id="placaVeiculo" class="calc-input" placeholder="Ex: ABC123, ZXY987 (separar por v√≠rgula)" />
        </div>
        <div class="grid-item">
            <label for="negociadoras">Negociadoras:</label>
            <input type="text" id="negociadoras" class="calc-input" />
        </div>
    </div>
    
    <label for="vendaValorObs">Cargo / Observa√ß√µes:</label>
    <input type="text" id="vendaValorObs" class="calc-input" placeholder="Cargo do cliente ou observa√ß√µes" />
    
    <label for="tipoValor">Tipo de Pagamento:</label>
    <select id="tipoValor" class="calc-input">
      <option value="limpo">Dinheiro Limpo</option>
      <option value="sujo">Dinheiro Sujo</option>
      <option value="limpo_alianca">Limpo (Alian√ßa)</option>
      <option value="sujo_alianca">Sujo (Alian√ßa)</option>
    </select>
    
    <div class="actions">
      <button id="calcBtn" class="primary">Calcular</button>
      <button id="resetBtn" class="muted">Limpar Campos</button>
    </div>
    
    <div id="results" class="results-container" style="display: none;">
        <div class="grid-container">
            <div class="grid-item">
                <h3>Materiais Necess√°rios</h3>
                <table class="results-table">
                  <tbody id="resultsBody"></tbody>
                </table>
            </div>
            <div class="grid-item">
                <h3>Valores de Venda</h3>
                <table class="results-table">
                  <tbody id="valuesBody"></tbody>
                </table>
            </div>
        </div>
        <div class="valor-total-container">
            <strong>Valor Total: <span id="valorTotalGeral">R$ 0</span></strong>
        </div>
    </div>
    
    <div class="actions" style="margin-top: 20px; border-top: 1px solid var(--cor-borda); padding-top: 15px;">
        <button id="registerBtn" class="success">Registrar Venda</button>
        <button id="discordBtnCalc" class="discord">Copiar (Discord)</button>
        <button id="toggleHistoryBtn">Ver Hist√≥rico</button>
    </div>
    
  </div>
  
  <div id="historyCard" class="card card-full-width" style="display: none;">
    <div class="card-header">
        <h2>Hist√≥rico de Vendas</h2>
        <button id="toggleCalcBtn" class="primary">Voltar para Calculadora</button>
    </div>
    <div class="filtro-container">
        <input type="text" id="filtroHistorico" placeholder="Pesquisar no hist√≥rico..." />
        <button id="csvBtn">Exportar CSV</button>
        <button id="clearHistoryBtn" class="danger" style="display: none;">Limpar Hist√≥rico</button>
    </div>
    <div id="topScrollbarContainer"><div id="topScrollbarContent"></div></div>
    <div class="history-table-wrapper" id="historyTableWrapper">
        <table id="historicoVendasTabela">
            <thead>
                <tr>
                    <th>Data/Hora</th>
                    <th>Cliente</th>
                    <th>Organiza√ß√£o</th>
                    <th>Telefone</th>
                    <th>Itens</th>
                    <th>Valor</th>
                    <th>Negociadoras</th>
                    <th>Registrado Por</th>
                    <th>A√ß√µes</th>
                </tr>
            </thead>
            <tbody id="salesHistory">
            </tbody>
        </table>
    </div>
  </div>
  
  <div id="adminPanel" class="card card-full-width" style="display: none;">
      <div class="card-header">
          <h2>Painel Administrador</h2>
          <button id="toggleCalcBtnAdmin" class="primary">Voltar para Calculadora</button>
      </div>
      <div class="admin-sections-container">
          <div class="admin-section">
              <h3>Usu√°rios Online</h3>
              <div id="adminOnlineStatus"></div>
          </div>
          <div class="admin-section">
              <h3>Controles Globais</h3>
              <label for="bottomPanelText">Mensagem do Rodap√©:</label>
              <textarea id="bottomPanelText" rows="3"></textarea>
              <button id="saveBottomPanelTextBtn" class="success">Salvar Mensagem</button>
              
              <h4>Op√ß√µes de Layout</h4>
              <div class="checkbox-container">
                  <input type="checkbox" id="layoutToggleNightMode">
                  <label for="layoutToggleNightMode">For√ßar Modo Noturno Global</label>
              </div>
              <div class="checkbox-container">
                  <input type="checkbox" id="layoutToggleBottomPanel">
                  <label for="layoutToggleBottomPanel">Ativar Rodap√© Global</label>
              </div>
              
              <h4>Controle de Usu√°rios</h4>
              <label for="adminUserSelect">Gerenciar Usu√°rio:</label>
              <select id="adminUserSelect"></select>
              <label for="adminUserTagSelect">Definir Tag:</label>
              <select id="adminUserTagSelect">
                  <option value="ADMIN">ADMIN</option>
                  <option value="HELLS">HELLS</option>
                  <option value="Visitante">Visitante</option>
              </select>
              <button id="adminSaveUserTagBtn" class="success">Salvar Tag</button>
              <button id="adminDeleteUserBtn" class="danger">Excluir Usu√°rio</button>
          </div>
          <div class="admin-section">
              <h3>Migra√ß√£o de Dados (Dev)</h3>
              <p>Execute apenas se voc√™ souber o que est√° fazendo.</p>
              <button id="migrateDossierBtn" class="danger">1. Migrar Vendas para Dossi√™</button>
              <button id="migrateVeiculosBtn" class="danger">2. Migrar Ve√≠culos (Carro/Placa)</button>
          </div>
      </div>
  </div>

  <div id="dossierCard" class="card card-full-width" style="display: none;">
      <div class="card-header">
          <h2>Investiga√ß√£o</h2>
          <button id="toggleCalcBtnDossier" class="primary">Voltar para Calculadora</button>
      </div>
      
      <div id="dossierOrgContainer">
          <div class="filtro-container">
              <input type="text" id="filtroDossierOrgs" placeholder="Pesquisar Bases ou Pessoas..." />
              <button id="addOrgBtn" class="success">+ Adicionar Base</button>
          </div>
          <div class="dossier-grid" id="dossierOrgGrid">
              </div>
      </div>
      
      <div id="dossierPeopleContainer" style="display: none;">
          <div class="dossier-header-bar">
              <button id="dossierVoltarBtn" class="muted">‚Üê Voltar para Bases</button>
              <h3 id="dossierPeopleTitle">Membros: Hells Angels</h3>
          </div>
          
          <div class="tab-container">
              <button class="tab-btn active" id="tabMembros">Membros</button>
              <button class="tab-btn" id="tabSituacoes">Situa√ß√µes</button>
          </div>
          
          <div id="membrosContent">
              <div class="filtro-container">
                  <input type="text" id="filtroDossierPeople" placeholder="Pesquisar membros nesta base..." />
                  <button id="addPessoaBtn" class="success" data-org-name="">+ Adicionar Pessoa</button>
              </div>
              <div class="dossier-grid" id="dossierPeopleGrid">
                  </div>
          </div>
          
          <div id="situacoesContent" style="display: none;">
              <div class="filtro-container">
                  <p>Relatos de ocorr√™ncias e situa√ß√µes envolvendo esta base.</p>
                  <button id="addSituacaoBtn" class="success" data-org-name="">+ Adicionar Relato</button>
              </div>
              <div class="situacoes-list" id="situacoesList">
                  </div>
          </div>
          </div>
  </div>
  
  <div class="bottom-panel" id="bottomPanel">
      <p id="bottomPanelMessage"></p>
  </div>
  
  <div id="editDossierOverlay" class="modal-overlay"></div>
  <div id="editDossierModal" class="card modal-content">
      <h2>Editar Dossi√™</h2>
      <input type="hidden" id="editDossierOrg">
      <input type="hidden" id="editDossierId">
      <label for="editDossierNome">Nome:</label>
      <input type="text" id="editDossierNome" placeholder="Nome Completo">
      <label for="editDossierNumero">N√∫mero:</label>
      <input type="text" id="editDossierNumero" placeholder="(055) 555-5555">
      <label for="editDossierCargo">Cargo:</label>
      <input type="text" id="editDossierCargo" placeholder="Cargo/Fun√ß√£o">
      <label for="editDossierFotoUrl">Link da Foto (URL):</label>
      <input type="text" id="editDossierFotoUrl" placeholder="URL da imagem">
      <label for="editDossierInstagram">Instagram:</label>
      <input type="text" id="editDossierInstagram" placeholder="@usuario">
      
      <div class="veiculo-sub-modal">
          <h4>Ve√≠culos</h4>
          <div class="grid-container" style="gap: 5px 10px;">
              <input type="text" id="editModalCarroNome" placeholder="Nome do Carro" class="grid-item">
              <input type="text" id="editModalCarroPlaca" placeholder="Placa" class="grid-item">
              <input type="text" id="editModalCarroFoto" placeholder="URL Foto Ve√≠culo" class="grid-item" style="grid-column: 1 / span 2;">
          </div>
          <div class="actions" style="padding: 5px 0 10px 0; justify-content: flex-end;">
              <button id="editModalAddVeiculoBtn" class="primary" style="padding: 5px 8px; font-size: 12px;">+ Adicionar Ve√≠culo</button>
              <button id="editModalCancelVeiculoBtn" class="muted" style="padding: 5px 8px; font-size: 12px; display: none;">Cancelar Edi√ß√£o</button>
          </div>
          <div class="veiculo-lista" id="editModalListaVeiculos"></div>
      </div>
      
      <div class="actions">
        <button id="saveDossierBtn" class="success">Salvar</button>
        <button id="cancelDossierBtn" class="danger">Cancelar</button>
      </div>
  </div>

  <div id="addDossierOverlay" class="modal-overlay"></div>
  <div id="addDossierModal" class="card modal-content">
      <h2>Adicionar Pessoa ao Dossi√™</h2>
      <input type="hidden" id="addDossierOrganizacao">
      <label for="addDossierNome">Nome:</label>
      <input type="text" id="addDossierNome" placeholder="Nome Completo">
      <label for="addDossierNumero">N√∫mero:</label>
      <input type="text" id="addDossierNumero" placeholder="(055) 555-5555">
      <label for="addDossierCargo">Cargo:</label>
      <input type="text" id="addDossierCargo" placeholder="Cargo/Fun√ß√£o">
      <label for="addDossierFotoUrl">Link da Foto (URL):</label>
      <input type="text" id="addDossierFotoUrl" placeholder="URL da imagem">
      <label for="addDossierInstagram">Instagram:</label>
      <input type="text" id="addDossierInstagram" placeholder="@usuario">
      
      <div class="veiculo-sub-modal">
          <h4>Ve√≠culos</h4>
          <div class="grid-container" style="gap: 5px 10px;">
              <input type="text" id="addModalCarroNome" placeholder="Nome do Carro" class="grid-item">
              <input type="text" id="addModalCarroPlaca" placeholder="Placa" class="grid-item">
              <input type="text" id="addModalCarroFoto" placeholder="URL Foto Ve√≠culo" class="grid-item" style="grid-column: 1 / span 2;">
          </div>
          <div class="actions" style="padding: 5px 0 10px 0; justify-content: flex-end;">
              <button id="addModalAddVeiculoBtn" class="primary" style="padding: 5px 8px; font-size: 12px;">+ Adicionar Ve√≠culo</button>
              <button id="addModalCancelVeiculoBtn" class="muted" style="padding: 5px 8px; font-size: 12px; display: none;">Cancelar Edi√ß√£o</button>
          </div>
          <div class="veiculo-lista" id="addModalListaVeiculos"></div>
      </div>
      
      <div class="actions">
        <button id="saveNewDossierBtn" class="success">Salvar</button>
        <button id="cancelNewDossierBtn" class="danger">Cancelar</button>
      </div>
  </div>
  
  <div id="orgModalOverlay" class="modal-overlay"></div>
  <div id="orgModal" class="card modal-content" style="max-width: 500px;">
      <h2 id="orgModalTitle">Editar Organiza√ß√£o</h2>
      <input type="hidden" id="editOrgId">
      
      <label for="orgNome">Nome da Organiza√ß√£o:</label>
      <input type="text" id="orgNome" placeholder="Ex: Hells Angels, Nox">
      
      <label for="orgFotoUrl">Link da Logo/Foto (URL):</label>
      <input type="text" id="orgFotoUrl" placeholder="URL da imagem da organiza√ß√£o">
      
      <label for="orgInfo">Informa√ß√µes da Base:</label>
      <textarea id="orgInfo" placeholder="Detalhes sobre a base, localiza√ß√£o, etc." rows="4"></textarea>

      <div class="actions" style="margin-top: 20px; border-top: 1px solid var(--cor-borda); padding-top: 15px;">
          <button id="saveOrgBtn" class="success">Salvar</button>
          <button id="deleteOrgBtn" class="danger" style="display: none;">Excluir</button>
          <button id="cancelOrgBtn" class="muted">Cancelar</button>
      </div>
  </div>
  
  <div id="situacaoModalOverlay" class="modal-overlay"></div>
  <div id="situacaoModal" class="card modal-content" style="max-width: 500px;">
      <h2 id="situacaoModalTitle">Adicionar Relato de Situa√ß√£o</h2>
      <input type="hidden" id="situacaoId">
      <input type="hidden" id="situacaoOrgName">
      
      <label for="situacaoRelato">Relato / Descri√ß√£o do Ocorrido:</label>
      <textarea id="situacaoRelato" placeholder="Descreva a situa√ß√£o, o que aconteceu, envolvidos, etc." rows="6"></textarea>
      
      <label for="situacaoStatus">Status:</label>
      <select id="situacaoStatus">
          <option value="Em an√°lise">Em an√°lise</option>
          <option value="Verificado">Verificado</option>
      </select>

      <div class="actions" style="margin-top: 20px; border-top: 1px solid var(--cor-borda); padding-top: 15px;">
          <button id="saveSituacaoBtn" class="success">Salvar</button>
          <button id="cancelSituacaoBtn" class="muted">Cancelar</button>
      </div>
  </div>
  <div id="imageLightboxOverlay" class="modal-overlay"></div>
  <div id="imageLightboxModal" class="modal-content" style="padding: 0; background: none; box-shadow: none;">
      <img id="lightboxImg" src="" alt="Imagem Ampliada">
  </div>

  <script type="module" src="script.js"></script>
</body>
</html>
