<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  
  <link rel="icon" type="image/png" href="logo-dark.png">
  
  <title>Hells Angels</title>
  
  <link rel="stylesheet" href="style.css"> 
  
</head>
<body class="light">
  
  <a href="#" id="logoLink">
    <img id="appLogo" src="logo-dark.png" alt="Hells Angels Logo" class="app-logo">
  </a>

  <div id="welcomeScreen"> 
      <img id="welcomeLogo" src="logo-dark.png" alt="Welcome Logo"> 
      <h2 style="font-weight: 900;">Bem-vindo(a)</h2>
      <p style="margin-bottom: 20px; font-size: 16px;">Calculadora e Registro de Vendas Hells Angels</p>
      <button id="enterBtn" class="primary">Entrar no Site</button>
  </div>
  
  <div class="top-right-controls">
      <button class="control-btn" id="tutorialBtn">üí° Tutorial</button> 
      <button class="control-btn" id="themeBtn">üåô Modo Noturno</button>
      <button class="control-btn" id="investigacaoBtn" style="display: none;">üïµÔ∏è Investiga√ß√£o</button>
      <button class="control-btn" id="adminPanelBtn" style="display: none;">üõ°Ô∏è Admin</button>
      <button class="control-btn" id="logoutBtn" style="background-color: var(--cor-erro);">Sair</button>
  </div>
  
  <div id="authScreen" class="card" style="display: none; max-width: 400px; margin: 80px auto 0;">
      <h2>Login Hells</h2>
      <label for="username">Usu√°rio:</label>
      <input type="text" id="username" placeholder="Digite seu usu√°rio" autocomplete="username">
      
      <label for="password">Senha:</label>
      <input type="password" id="password" placeholder="Digite sua senha" autocomplete="current-password">
      
      <div class="actions">
          <button id="loginBtn" class="primary">Entrar</button>
          <button id="registerUserBtn" class="muted">Registrar</button>
      </div>
      
      <p id="authMessage" style="color: var(--cor-erro); margin-top: 15px; text-align: center; height: 20px;"></p>
      <a href="#" id="forgotPasswordLink" style="display: block; text-align: center; margin-top: 10px; font-size: 13px; color: var(--cor-principal);">Esqueceu a senha?</a>
  </div>

  <div id="mainCard" class="card" style="display: none;">
    <div class="header-container">
        <h1>Calculadora Hells</h1>
        <span class="user-status-display" id="userStatus" style="display: none;"></span>
    </div>

    <div class="grid-venda">
      <div class="input-group">
        <label for="qtyTickets">Tickets (unidade):</label>
        <input type="number" id="qtyTickets" placeholder="0">
      </div>
      <div class="input-group">
        <label for="qtyTablets">Tablets (unidade):</label>
        <input type="number" id="qtyTablets" placeholder="0">
      </div>
      <div class="input-group">
        <label for="qtyNitro">Nitro (unidade):</label>
        <input type="number" id="qtyNitro" placeholder="0">
      </div>
      <div class="input-group">
        <label for="tipoValor">Tipo de Valor:</label>
        <select id="tipoValor">
          <option value="limpo">Dinheiro Limpo</option>
          <option value="sujo">Dinheiro Sujo</option>
          <option value="limpo_alianca">Limpo (Alian√ßa)</option>
          <option value="sujo_alianca">Sujo (Alian√ßa)</option>
        </select>
      </div>
    </div>
    
    <div class="actions">
      <button id="calcBtn" class="primary">Calcular</button>
      <button id="resetBtn" class="muted">Limpar</button>
      <button id="toggleHistoryBtn" class="muted">Hist√≥rico de Vendas</button>
      <button id="discordBtnCalc" class="muted" style="background-color: #5865F2; color: #fff;">Copiar (Discord)</button>
    </div>

    <div id="results" style="display: none; margin-top: 15px;">
      <div class="grid" style="grid-template-columns: 1fr 1fr;">
          <div>
              <h2>Materiais Necess√°rios</h2>
              <table id="resultsTable">
                <tbody id="resultsBody"></tbody>
              </table>
          </div>
          <div>
              <h2>Valores por Produto</h2>
              <table id="valuesTable">
                <tbody id="valuesBody"></tbody>
              </table>
          </div>
      </div>
      <h2 style="text-align: right; margin-top: 15px;">Valor Total: <span id="valorTotalGeral" style="color: #00b33c;">R$ 0</span></h2>
    </div>
    
    <h2 style="border-top: 1px solid var(--cor-borda); padding-top: 15px; margin-top: 20px;">Registrar Venda</h2>
    
    <div class="grid-venda">
        <div class="input-group">
          <label for="nomeCliente">Nome do Cliente:</label>
          <input type="text" id="nomeCliente" list="dossierNomes" autocomplete="off">
          <p class="suggestion-tip">Comece a digitar para buscar no Dossi√™...</p>
        </div>
        
        <div class="input-group">
          <label for="telefone">Telefone:</label>
          <input type="text" id="telefone" placeholder="555-0000">
        </div>

        <div class="input-group">
            <label for="organizacaoTipo">Organiza√ß√£o (Tipo):</label>
            <select id="organizacaoTipo">
                <option value="CNPJ">CNPJ</option>
                <option value="CPF">CPF</option>
                <option value="OUTROS">Outros</option>
            </select>
        </div>
        
        <div class="input-group">
          <label for="organizacao">Organiza√ß√£o (Nome):</label>
          <input type="text" id="organizacao" placeholder="Ex: Hells Angels" list="dossierOrgs" autocomplete="off">
        </div>
    </div>
    
    <div class="grid-venda-3col">
        <div class="input-group">
          <label for="carroVeiculo">Carro (Opcional):</label>
          <input type="text" id="carroVeiculo" placeholder="Ex: Sultan">
        </div>
        <div class="input-group">
          <label for="placaVeiculo">Placas (Opcional):</label>
          <input type="text" id="placaVeiculo" placeholder="Ex: 88ABC99">
        </div>
        <div class="input-group">
          <label for="negociadoras">Negociadoras:</label>
          <input type="text" id="negociadoras" placeholder="Nomes">
        </div>
    </div>
    
    <div class="input-group">
      <label for="vendaValorObs">Cargo (Observa√ß√£o):</label>
      <input type="text" id="vendaValorObs" placeholder="Ex: Cargo do cliente (opcional)">
    </div>
    
    <div class="actions">
        <button id="registerBtn" class="success">Registrar Venda</button>
    </div>
    
    <datalist id="dossierNomes"></datalist>
    <datalist id="dossierOrgs"></datalist>
  </div>

  <div id="historyCard" style="display: none;">
    <div id="historyBackground">
        <img src="logo-dark.png" alt="Hist√≥rico Background">
        
        <div class="header-container">
            <h1>Hist√≥rico de Vendas</h1>
        </div>
        
        <div class="actions">
          <button id="toggleCalcBtn" class="primary">Voltar para Calculadora</button>
          <button id="csvBtn" class="muted">Exportar CSV</button>
          <button id="clearHistoryBtn" class="danger" style="display: none;">Limpar Hist√≥rico</button>
          <input type="text" id="filtroHistorico" placeholder="Filtrar por nome, data, valor..." style="width: 250px; margin-left: auto;">
        </div>
        
        <div id="topHistoryScrollbar" class="top-scrollbar-wrapper" style="overflow-x: auto; overflow-y: hidden; height: 20px;"></div>
        
        <div class="history-table-wrapper">
          <table id="historyTable">
            <thead>
              <tr>
                <th>Data/Hora</th>
                <th>Cliente</th>
                <th>Organiza√ß√£o</th>
                <th>Telefone</th>
                <th>Produtos</th>
                <th>Valor Total</th>
                <th>Negociadoras</th>
                <th>Registrado Por</th>
                <th>A√ß√µes</th>
              </tr>
            </thead>
            <tbody id="salesHistory">
              </tbody>
          </table>
        </div>
    </div>
  </div>
  
  <div id="adminPanel" class="card" style="display: none;">
      <div class="header-container">
          <h1>Painel Administrador</h1>
      </div>
      <div class="actions">
          <button id="toggleCalcBtnAdmin" class="primary">Voltar para Calculadora</button>
          <span>Usu√°rios Online: <strong id="onlineUsersCount" style="color: var(--cor-principal);">0</strong></span>
      </div>
      
      <div class="grid" style="grid-template-columns: 1fr 1fr; gap: 20px;">
          <div>
              <h2>Lista de Usu√°rios</h2>
              <div class="history-table-wrapper" style="max-height: 400px; overflow-y: auto;">
                  <table style="min-width: 600px;">
                      <thead>
                          <tr>
                              <th style="width: 35%;">Usu√°rio / Status</th>
                              <th style="width: 45%;">Atividade Atual</th>
                              <th style="width: 20%;">A√ß√µes</th>
                          </tr>
                      </thead>
                      <tbody id="adminUserListBody">
                          </tbody>
                  </table>
              </div>
          </div>
          <div>
              <h2>Controles Globais</h2>
              <div class="input-group" style="display: flex; align-items: center; gap: 10px;">
                  <input type="checkbox" id="layoutToggleNightMode" style="width: auto;">
                  <label for="layoutToggleNightMode" style="margin: 0;">Ativar Tema Noturno (Global)</label>
              </div>
              <div class="input-group" style="display: flex; align-items: center; gap: 10px;">
                  <input type="checkbox" id="layoutToggleBottomPanel" style="width: auto;">
                  <label for="layoutToggleBottomPanel" style="margin: 0;">Ativar Painel Inferior (Global)</label>
              </div>
              <label for="bottomPanelText">Texto do Painel Inferior:</label>
              <input type="text" id="bottomPanelText" placeholder="Digite a mensagem do painel...">
              <button id="saveBottomPanelTextBtn" class="muted" style="margin-top: 10px;">Salvar Texto</button>
              
              <h2 style="margin-top: 20px;">Migra√ß√£o de Dados</h2>
              <p style="font-size: 13px; margin: 5px 0;">Use apenas se dados antigos existirem.</p>
              <button id="migrateDossierBtn" class="danger">Migrar Vendas Antigas para Dossi√™</button>
              <button id="migrateVeiculosBtn" class="danger" style="margin-top: 10px;">Migrar Ve√≠culos Antigos (Dossi√™)</button>
          </div>
      </div>
  </div>
  
  <div id="dossierCard" class="card" style="display: none;">
      <div id="dossierOrgContainer">
          <div class="header-container">
              <h1>Investiga√ß√£o - Bases</h1>
          </div>
          <div class="actions">
              <button id="toggleCalcBtnDossier" class="primary">Voltar para Calculadora</button>
              <button id="addOrgBtn" class="success">+ Adicionar Base</button>
              <input type="text" id="filtroDossierOrgs" placeholder="Buscar Base ou Pessoa..." style="width: 250px; margin-left: auto;">
          </div>
          <div id="dossierOrgGrid" class="dossier-org-grid">
              </div>
      </div>
      
      <div id="dossierPeopleContainer" style="display: none;">
          <div id="dossierPeopleHeader">
              <h2 id="dossierPeopleTitle">Membros</h2>
              <div class="actions">
                  <button id="dossierVoltarBtn" class="muted">Voltar para Bases</button>
                  <button id="addPessoaBtn" class="success">+ Adicionar Pessoa</button>
                  <input type="text" id="filtroDossierPeople" placeholder="Buscar membro, cargo, ve√≠culo..." style="width: 250px; margin-left: auto;">
              </div>
          </div>
          <div id="dossierPeopleGrid" class="dossier-people-grid">
              </div>
      </div>
  </div>

  <div id="bottomPanel" style="display: none;">
      <p id="bottomPanelDisplay" style="margin: 0; font-weight: 600;"></p>
  </div>
  
  <div id="editDossierOverlay" class="modal-overlay"></div>
  <div id="editDossierModal" class="card modal-content">
      <h2 id="editDossierTitle">Editar Dossi√™</h2>
      <input type="hidden" id="editDossierId">
      <input type="hidden" id="editDossierOrg">
      
      <label for="editDossierNome">Nome:</label>
      <input type="text" id="editDossierNome" placeholder="Nome Completo">
      
      <label for="editDossierNumero">N√∫mero:</label>
      <input type="text" id="editDossierNumero" placeholder="555-0000">
      
      <label for="editDossierCargo">Cargo:</label>
      <input type="text" id="editDossierCargo" placeholder="Cargo na organiza√ß√£o">
      
      <label for="editDossierFotoUrl">Link da Foto (URL):</label>
      <input type="text" id="editDossierFotoUrl" placeholder="URL da imagem">
      
      <label for="editDossierInstagram">Instagram:</label>
      <input type="text" id="editDossierInstagram" placeholder="@usuario">
      
      <h3>Ve√≠culos</h3>
      <div class="grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 10px; align-items: flex-end;">
          <div class="input-group" style="margin: 0;">
            <label style="margin: 0 0 4px;">Carro:</label>
            <input type="text" id="editModalCarroNome" placeholder="Sultan" style="padding: 6px;">
          </div>
          <div class="input-group" style="margin: 0;">
            <label style="margin: 0 0 4px;">Placa:</label>
            <input type="text" id="editModalCarroPlaca" placeholder="88ABC99" style="padding: 6px; text-transform: uppercase;">
          </div>
          <div class="input-group" style="margin: 0;">
            <label style="margin: 0 0 4px;">Foto (URL):</label>
            <input type="text" id="editModalCarroFoto" placeholder="URL da foto" style="padding: 6px;">
          </div>
          <div style="grid-column: 1 / -1; display: flex; gap: 10px; margin-top: 5px;">
              <button id="editModalAddVeiculoBtn" class="success" style="padding: 6px 10px; font-size: 13px; width: 100%;">+ Adicionar Ve√≠culo</button>
              <button id="editModalCancelVeiculoBtn" class="muted btn-cancel-veiculo" style="padding: 6px 10px; font-size: 13px;">Cancelar Edi√ß√£o</button>
          </div>
      </div>
      <div id="editModalListaVeiculos"></div>

      <div class="actions" style="margin-top: 20px;">
          <button id="saveDossierBtn" class="success">Salvar</button>
          <button id="cancelDossierBtn" class="danger">Cancelar</button>
      </div>
  </div>
  
  <div id="addDossierOverlay" class="modal-overlay"></div>
  <div id="addDossierModal" class="card modal-content">
      <h2 id="addDossierTitle">Adicionar Pessoa</h2>
      <input type="hidden" id="addDossierOrganizacao">
      
      <label for="addDossierNome">Nome:</label>
      <input type="text" id="addDossierNome" placeholder="Nome Completo">
      
      <label for="addDossierNumero">N√∫mero:</label>
      <input type="text" id="addDossierNumero" placeholder="555-0000">
      
      <label for="addDossierCargo">Cargo:</label>
      <input type="text" id="addDossierCargo" placeholder="Cargo na organiza√ß√£o">
      
      <label for="addDossierFotoUrl">Link da Foto (URL):</label>
      <input type="text" id="addDossierFotoUrl" placeholder="URL da imagem">
      
      <h3>Ve√≠culos</h3>
      <div class="grid" style="grid-template-columns: 1fr 1fr 1fr; gap: 10px; align-items: flex-end;">
          <div class="input-group" style="margin: 0;">
            <label style="margin: 0 0 4px;">Carro:</label>
            <input type="text" id="addModalCarroNome" placeholder="Sultan" style="padding: 6px;">
          </div>
          <div class="input-group" style="margin: 0;">
            <label style="margin: 0 0 4px;">Placa:</label>
            <input type="text" id="addModalCarroPlaca" placeholder="88ABC99" style="padding: 6px; text-transform: uppercase;">
          </div>
           <div class="input-group" style="margin: 0;">
            <label style="margin: 0 0 4px;">Foto (URL):</label>
            <input type="text" id="addModalCarroFoto" placeholder="URL da foto" style="padding: 6px;">
          </div>
          <div style="grid-column: 1 / -1; display: flex; gap: 10px; margin-top: 5px;">
              <button id="addModalAddVeiculoBtn" class="success" style="padding: 6px 10px; font-size: 13px; width: 100%;">+ Adicionar Ve√≠culo</button>
              <button id="addModalCancelVeiculoBtn" class="muted btn-cancel-veiculo" style="padding: 6px 10px; font-size: 13px;">Cancelar Edi√ß√£o</button>
          </div>
      </div>
      <div id="addModalListaVeiculos"></div>

      <div class="actions" style="margin-top: 20px;">
          <button id="saveNewDossierBtn" class="success">Salvar</button>
          <button id="cancelNewDossierBtn" class="danger">Cancelar</button>
      </div>
  </div>
  
  <div id="orgModalOverlay" class="modal-overlay"></div>
  <div id="orgModal" class="card modal-content" style="max-width: 500px;">
      <h2 id="orgModalTitle">Editar Organiza√ß√£o</h2>
      <input type="hidden" id="editOrgId">
      
      <label for="orgNome">Nome da Organiza√ß√£o:</label>
      <input type="text" id="orgNome" placeholder="Ex: Hells Angels, Nox">
      
      <label for="orgFotoUrl">Link da Logo/Foto (URL):</label>
      <input type="text" id="orgFotoUrl" placeholder="URL da imagem da organiza√ß√£o">
      
      <label for="orgInfo">Informa√ß√µes da Base:</label>
      <textarea id="orgInfo" placeholder="Detalhes sobre a base, localiza√ß√£o, etc." rows="4"></textarea>

      <div class="actions" style="margin-top: 20px; border-top: 1px solid var(--cor-borda); padding-top: 15px;">
          <button id="saveOrgBtn" class="success">Salvar</button>
          <button id="deleteOrgBtn" class="danger" style="display: none;">Excluir</button>
          <button id="cancelOrgBtn" class="muted">Cancelar</button>
      </div>
  </div>
  
  <div id="imageLightboxOverlay" class="modal-overlay"></div>
  <div id="imageLightboxModal">
      <img id="lightboxImg" src="" alt="Imagem Ampliada">
  </div>
  
  <script type="module" src="script.js"></script>
  
</body>
</html>
